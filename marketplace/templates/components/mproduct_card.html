<div class="border rounded-lg overflow-hidden shadow-lg relative ml-2 p-2">
<a href="{% url 'marketplace:product_description_page' product.productID %}" class="block">
    {% if product.condition == 'New' %}
        <span class="absolute top-2 left-2 bg-blue-500 text-white text-xs font-semibold px-2 py-1 rounded">
            New
        </span>
    {% elif product.condition == 'Used' %}
        <span class="absolute top-2 left-2 bg-yellow-500 text-white text-xs font-semibold px-2 py-1 rounded">
            Used
        </span>
    {% endif %}
    
    <!-- Display the first image of the product -->
    <img 
        src="{{ product.images.first.image.url }}" 
        alt="{{ product.brand1 }} {{ product.model }}" 
        class="w-full h-48 object-cover"
    />

    <div class="p-4">
        <h2 class="text-xl font-bold"> {{ product.model }}</h2>
        <p class="text-gray-600 font-medium text-2xl price" >Rs. {{ product.price|floatformat:0 }}</p>
        <p class="text-gray-600">{{ product.fk_ShopID.city }}</p>
    </div>
</a>
    <div class="p-4">
        <a 
            href="{% url 'marketplace:store' product.fk_ShopID.id %}" 
            class="text-blue-600 hover:text-blue-800 text-sm font-semibold">
            Visit Store
        </a>
    </div>
</div>

<script>
  // Format the price with commas in Pakistani style for all price elements
  document.addEventListener('DOMContentLoaded', function() {
    const priceElements = document.querySelectorAll('.price');
    priceElements.forEach(function(priceElement) {
      let price = priceElement.innerText.replace('Rs. ', '');
      price = parseFloat(price.replace(',', '')); // Remove any existing commas
      priceElement.innerText = 'Rs. ' + price.toLocaleString('en-PK');
    });
  });
</script>


